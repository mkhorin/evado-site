<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Основные сущности - Кинотеатр - Декларативный Node.js фреймворк Evado</title>
  <link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico">
  <link rel="stylesheet" href="../../vendor/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="../../vendor/highlight/styles/default.css">
  <link rel="stylesheet" href="../../css/common.css">
</head>

<body>
<div class="wrapper">
  <nav class="navbar navbar-inverse navbar-target"></nav>

  <article class="container">
    <div class="row">
      <div class="col-md-9">
        <h1>Основные сущности</h1>
        <p>Перейдите в Студию и создайте основные классы приложения.</p>
        <img class="image-view" src="../../images/cinema/entities-01.png" alt="Основные классы приложения">
        <h4>Кинозал</h4>
        <p>
          Класс <code>hall</code> (Зал) определяет помещение, где просходит показ фильма.
          Кинотеатр может состоять из нескольких залов.
        </p>
        <p>
          Создайте строковые атрибуты <code>name</code> (Название) и <code>description</code> (Описание).
          Для атрибута <code>name</code> установите флажки <b>Обязательный</b> и <b>Уникальный</b>.
        </p>
        <h4>Место в зале</h4>
        <p>Класс <code>seat</code> (Место) определяет место, на которое продается билет.</p>
        <p>
          Создайте обязательный ссылочный атрибут <code>hall</code> (Зал), чтобы привязать место к залу.
          Установите флажок <b>Жадная загрузка</b>, чтобы загружать объект зала вместе с местом.
          Создайте обязательные целочисленные атрибуты <code>row</code> (Ряд) и <code>column</code> (Место).
          Для атрибута <code>column</code> добавьте валидатор <b>Уникальный</b> с фильтром:
          <code>"hall, row"</code>. Это проверит уникальность места внутри зала и ряда.
        </p>
        <h4>Постер фильма</h4>
        <p>Класс <code>poster</code> (Постер) определяет плакат для фильма.</p>
        <p>
          Создайте обязательный строковый атрибут <code>title</code> (Заголовок).
          Создайте обязательный файловый атрибут <code>file</code> (Файл).
          Для класса добавьте поведение <b>Файл</b>. Это обеспечит загрузку и сохранение файлов.
          Установите флажок <b>Только изображения</b>.
          В поле <b>Атрибут имени файла</b> выберите <b>Заголовок</b>.
          Это автоматически установит в заголовок имя загружаемого файла.
        </p>
        <h4>Кинофильм</h4>
        <p>Класс <code>movie</code> (Фильм) определяет характеристики кинокартины.</p>
        <p>
          Создайте обязательный уникальный строковый атрибут <code>title</code> (Заголовок).
          Создайте текстовый атрибут <code>description</code> (Описание).
          Создайте обязательный целочисленный атрибут <code>duration</code> (Длительность).
          Он определяет длительность фильма в минутах.
          Создайте ссылочный атрибут <code>poster</code> (Постер).
        </p>
        <h4>Ценообразование</h4>
        <p>
          Класс <code>pricing</code> (Ценообразование) определяет цену билета.
          Зал может иметь несколько ценообразований.
          При создании <b>Показа</b> выбирается подходящий под условия вариант ценообразования.
          Например, специальные цены могут устанавливаться в выходные и праздничные дни или для новинок проката.
        </p>
        <p>
          Создайте обязательный строковый атрибут <code>name</code> (Название).
          Добавьте к нему валидатор <b>Уникальный</b> с фильтром <code>"hall"</code>.
          Это гарантирует уникальность названия внутри зала.
          Создайте обязательный целочисленный атрибут <code>value</code> (Значение).
          Это определяет цену билета.
          Создайте обязательный ссылочный атрибут <code>hall</code> (Зал).
          Установите флажок <b>Жадная загрузка</b>.
        </p>
        <h4>Специальная цена</h4>
        <p>
          Класс <code>seatPrice</code> (Цена места) определяет специальную цену билета для места в зале.
          Например, для первого, последнего рядов или мест повышенной комфортности.
        </p>
        <p>
          Создайте обязательный целочисленный атрибут <code>value</code> (Значение).
          Это определяет значение цены билета.
          Создайте обязательный ссылочный атрибут <code>seat</code> (Место).
          Это определяет место, для которого применяется специальная цена.
          Установите флажок <b>Жадная загрузка</b>.
        </p>
        <p>
          Создайте ссылочный атрибут <code>pricing</code> (Ценообразование).
          Установите флажки <b>Обязательный</b>, <b>Только чтение</b> и <b>Жадная загрузка</b>.
          Здесь видится противоречие в логике.
          Флажок <b>Обязательный</b> требует данные,
          а флажок <b>Только чтение</b> запрещает передачу данных от клиента.
          Действительно, напрямую создать объект класса <b>Цена места</b> нельзя.
          Однако это можно сделать через ссылочный атрибут класса <b>Ценообразование</b>,
          потому что в нем передается автоматическая привязка к объекту-владельцу.
        </p>
        <h4>Кинопоказ</h4>
        <p>Класс <code>screening</code> (Показ) определяет характеристики демонстрации кинофильма.</p>
        <p>
          Создайте атрибут <code>date</code> (Дата). Он определяет дату и время показа фильма.
          Выберите тип <b>Дата</b> и тип представления <b>Локальные дата и время</b>.
          Локальная дата привязана к месту события, поэтому клиенты будут видеть дату относительно своей часовой зоны.
        </p>
        <p>
          Создайте логический атрибут <code>active</code> (Активно). Он определяет доступность показа для продажи билетов.
          Создайте обязательные ссылочные атрибуты <code>movie</code> (Фильм), <code>hall</code> (Кинозал),
          <code>pricing</code> (Ценообразование).
          Для атрибута <b>Кинозал</b> установите флажок <b>Только чтение</b>.
          Это разрешает создавать показы только из кинозала.
        </p>
        <h4>Билет</h4>
        <p>Класс <code>ticket</code> (Билет) описывает проданные билеты.</p>
        <p>
          Создайте целочисленный атибут <code>price</code> (Цена).
          Он определяет цену за которую был продан билет.
          Установите флажок <b>Только чтение</b>.
          Добавьте поведение <b>Назначаемое значение</b>.
          В поле <b>Выражение</b> () укажите конфигурацию
          <a href="https://github.com/mkhorin/evado-app-cinema/blob/master/component/meta/expression/TicketPriceExpression.js" target="_blank">класса выражения</a>
          <code>{"Class":"component/meta/expression/TicketPriceExpression"}</code>
          и установите флажок <b>При создании</b>.
          Цена билета устанавливается в момент создания и в дальнейшем остается неизменной.
        </p>
        <p>
          Создайте обязательные ссылочные атибуты <code>screening</code> (Показ) и <code>seat</code> (Место).
          Это привязывает билет к месту и показу фильма.
        </p>
        <p>
          Экспортируйте метаданные и проверьте созданные сущности в модуле Офис.
        </p>
      </div>
    </div>
  </article>

</div>
<footer class="footer footer-inverse">
  <div class="container mt20">
    <p class="text-center">Copyright @ 2022 Maxim Khorin</p>
  </div>
</footer>

<script src="../../vendor/jquery/jquery.min.js"></script>
<script src="../../vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="../../vendor/highlight/highlight.pack.js"></script>
<script src="../../js/cinema.js"></script>
<script src="../../js/common-ru.js"></script>
<script src="../../js/common.js"></script>

</body>
</html>